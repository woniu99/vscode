# chapter3 HTTP报文内的http信息
## 1. http报文
1. **定义**：
- 报文是HTTP通信中的基本单位，由8位组字节流组成，通过HTTP通信传输。 
- 用于HTTP协议交互的信息被称为HTTP报文。请求端（客户端）的HTTP报文叫做**请求报文**， 响应端（服务器端）的叫做**响应报文**。HTTP报文本身是由多行（用CR+LF作换行符）数据构成的字符串文本。
2. **http报文组成结构**
- HTTP报文大致可以分为报文首部和报文主体两块。两者由最初出现的空行（CR+LF）来划分。通常，并不一定要有报文主体。
![](http://otkx6qgz7.bkt.clouddn.com/http/07.png)
![](http://otkx6qgz7.bkt.clouddn.com/http/10.png)
- **说明**
1. **请求行**：包含用于请求的方法，请求URI和HTTP版本。
2. **状态行**：包含表明响应结果的状态码，原因短语和HTTP版本。
3. **首部字段**： 包含表示请求和响应的各种条件和属性的各类首部。
4. **其他**： 可能包含HTTP的RFC里未定义的首部（Cookie等）。
## 2. 编码提升传输速率
HTTP在传输数据时可以按照数据原貌直接传输，但也可以在传输过程中通过编码提升传输速率。通过在传输时编码，能有效地处理大量的访问请求。
1. **压缩传输的内容编码**
- 内容编码指明应用在实体内容上的编码格式，并保持实体信息原样压缩。内容编码后的实体由客户端接收并负责解码。
- 内容编码形式：
1. gzip（GNU zip）
2. compress(UNIX系统的标准压缩)
3. deflate(zlib)
4. identity(不进行编码)
2.**发送多种数据的多部分对象集合**
- 发送邮件时，我们可以在邮件中写入文字并添加多份附件。这是因为采用了MIME(Multipurpose Internet Mail Extensions,多用途因特网邮件扩展)机制，她允许邮件处理文本、图片、视频等多个不同类型的数据。
- HTTP协议中也采纳了多部分对象集合，发送的一份报文主体内可含有多类型实体。通常是在图片或文件等上传时使用。
- 多部分对象集合包含的对象如下：
1. `multipart/form-data`
  在Web表单文件上传时使用。
- 使用：`Content-Type: multipart/form-data`
2. `multipart/byteranges`
  状态码206（Partial Content,部分内容）响应报文包含了多个范围的内容时使用。
- 使用：`Content-Type: multipart/byteranges`
## 3.内容协商返回最合适的内容
- 内容协商机制是指客户端和服务器端就响应的资源内容进行交涉，然后提供给客户端最为适合的资源。内容协商会以响应资源的语言、字符集、编码方式等作为判断的基准。
-包含在请求报文中的某些首部字段就是判断的基准。
1. Accept
2. Accept-Charset
3. Accept-Encoding
4. Accept-Language
5. Content-Language



